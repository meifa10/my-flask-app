<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register - Pabrik Gula</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body {
      background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('/static/image/pgpesantren.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .password-toggle {
      position: absolute;
      right: 10px;
      top: 38px;
      cursor: pointer;
      width: 24px;
      height: 24px;
      fill: #555;
    }

    .relative-input {
      position: relative;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">
  <div class="bg-white p-8 rounded-2xl shadow-md w-full max-w-md">
    <h2 class="text-2xl font-bold text-center text-gray-700 mb-6">Daftar Akun</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="mb-4 text-sm">
          {% for category, message in messages %}
            <li class="text-{{ 'red' if category in ['error', 'danger'] else 'green' }}-600">â€¢ {{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('register') }}">
      <div class="mb-4">
        <label class="block mb-1 text-sm text-gray-600">Username</label>
        <input type="text" name="username" required
          class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring focus:border-blue-400">
      </div>

      <div class="mb-4 relative-input">
        <label class="block mb-1 text-sm text-gray-600">Password</label>
        <input type="password" id="password" name="password" required
          class="w-full px-4 py-2 border rounded-lg pr-10 focus:outline-none focus:ring focus:border-blue-400">
        <span class="password-toggle" onclick="togglePassword('password', 'eyeOpen1', 'eyeSlash1')">
          <!-- Mata tertutup (default visible) -->
          <svg id="eyeSlash1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2.1 3.5L1 4.6l3.5 3.5C2.7 9.7 1.6 11.7 1 12c1.7 4.4 5.5 7.5 10 7.5 2.1 0 4-.6 5.7-1.7l3.6 3.6 1.1-1.1L2.1 3.5zM12 17.5c-3.1 0-5.8-2-7.3-5 0.5-1.1 1.3-2.2 2.3-3.1l2 2c-0.2 0.4-0.3 0.9-0.3 1.4a3.5 3.5 0 0 0 5 3.2l1.7 1.7c-1 0.5-2.1 0.8-3.4 0.8zm0-11a5.5 5.5 0 0 1 5.5 5.5c0 0.9-0.2 1.7-0.6 2.5l1.5 1.5c1.2-1.1 2.2-2.4 2.9-3.5-1.7-4.4-5.5-7.5-10-7.5-1.2 0-2.4 0.2-3.5 0.7l1.6 1.6c0.7-0.3 1.4-0.4 2.1-0.4z"/>
          </svg>
          <!-- Mata terbuka (default hidden) -->
          <svg id="eyeOpen1" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 4.5C7.5 4.5 3.7 7.6 2 12c1.7 4.4 5.5 7.5 10 7.5s8.3-3.1 10-7.5c-1.7-4.4-5.5-7.5-10-7.5zm0 13a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0-9a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"/>
          </svg>
        </span>
      </div>

      <div class="mb-6 relative-input">
        <label class="block mb-1 text-sm text-gray-600">Konfirmasi Password</label>
        <input type="password" id="confirm_password" name="password_confirmation" required
          class="w-full px-4 py-2 border rounded-lg pr-10 focus:outline-none focus:ring focus:border-blue-400">
        <span class="password-toggle" onclick="togglePassword('confirm_password', 'eyeOpen2', 'eyeSlash2')">
          <svg id="eyeSlash2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M2.1 3.5L1 4.6l3.5 3.5C2.7 9.7 1.6 11.7 1 12c1.7 4.4 5.5 7.5 10 7.5 2.1 0 4-.6 5.7-1.7l3.6 3.6 1.1-1.1L2.1 3.5zM12 17.5c-3.1 0-5.8-2-7.3-5 0.5-1.1 1.3-2.2 2.3-3.1l2 2c-0.2 0.4-0.3 0.9-0.3 1.4a3.5 3.5 0 0 0 5 3.2l1.7 1.7c-1 0.5-2.1 0.8-3.4 0.8zm0-11a5.5 5.5 0 0 1 5.5 5.5c0 0.9-0.2 1.7-0.6 2.5l1.5 1.5c1.2-1.1 2.2-2.4 2.9-3.5-1.7-4.4-5.5-7.5-10-7.5-1.2 0-2.4 0.2-3.5 0.7l1.6 1.6c0.7-0.3 1.4-0.4 2.1-0.4z"/>
          </svg>
          <svg id="eyeOpen2" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M12 4.5C7.5 4.5 3.7 7.6 2 12c1.7 4.4 5.5 7.5 10 7.5s8.3-3.1 10-7.5c-1.7-4.4-5.5-7.5-10-7.5zm0 13a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0-9a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z"/>
          </svg>
        </span>
      </div>

      <button type="submit" class="w-full bg-black text-white py-2 rounded-lg hover:bg-gray-800">Daftar</button>
    </form>

    <p class="text-sm text-center text-gray-500 mt-4">
      Sudah punya akun?
      <a href="{{ url_for('login') }}" class="text-blue-600 hover:underline">Login</a>
    </p>
  </div>

  <script>
    function togglePassword(fieldId, eyeOpenId, eyeSlashId) {
      const input = document.getElementById(fieldId);
      const eyeOpen = document.getElementById(eyeOpenId);
      const eyeSlash = document.getElementById(eyeSlashId);

      if (input.type === "password") {
        input.type = "text";
        eyeOpen.classList.remove("hidden");
        eyeSlash.classList.add("hidden");
      } else {
        input.type = "password";
        eyeOpen.classList.add("hidden");
        eyeSlash.classList.remove("hidden");
      }
    }
  </script>
</body>
</html>
